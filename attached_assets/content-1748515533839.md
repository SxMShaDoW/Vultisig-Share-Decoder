[Skip to content](https://github.com/vultisig/vultisig-windows/blob/main/core/ui/vault/import/components/DecryptVaultStep.tsx#start-of-content)

You signed in with another tab or window. [Reload](https://github.com/vultisig/vultisig-windows/blob/main/core/ui/vault/import/components/DecryptVaultStep.tsx) to refresh your session.You signed out in another tab or window. [Reload](https://github.com/vultisig/vultisig-windows/blob/main/core/ui/vault/import/components/DecryptVaultStep.tsx) to refresh your session.You switched accounts on another tab or window. [Reload](https://github.com/vultisig/vultisig-windows/blob/main/core/ui/vault/import/components/DecryptVaultStep.tsx) to refresh your session.Dismiss alert

[vultisig](https://github.com/vultisig)/ **[vultisig-windows](https://github.com/vultisig/vultisig-windows)** Public

- [Notifications](https://github.com/login?return_to=%2Fvultisig%2Fvultisig-windows) You must be signed in to change notification settings
- [Fork\\
7](https://github.com/login?return_to=%2Fvultisig%2Fvultisig-windows)
- [Star\\
9](https://github.com/login?return_to=%2Fvultisig%2Fvultisig-windows)


## Files

main

/

# DecryptVaultStep.tsx

Copy path

Blame

Blame

## Latest commit

[![Ehsan-saradar](https://avatars.githubusercontent.com/u/7792430?v=4&size=40)](https://github.com/Ehsan-saradar)[Ehsan-saradar](https://github.com/vultisig/vultisig-windows/commits?author=Ehsan-saradar)

[Move import vault to core and reuse it in both clients (](https://github.com/vultisig/vultisig-windows/commit/edff50a93456064b3ccfe316c860b8ae14408520) [#1555](https://github.com/vultisig/vultisig-windows/pull/1555) [)](https://github.com/vultisig/vultisig-windows/commit/edff50a93456064b3ccfe316c860b8ae14408520)

May 13, 2025

[edff50a](https://github.com/vultisig/vultisig-windows/commit/edff50a93456064b3ccfe316c860b8ae14408520) · May 13, 2025

## History

[History](https://github.com/vultisig/vultisig-windows/commits/main/core/ui/vault/import/components/DecryptVaultStep.tsx)

29 lines (25 loc) · 961 Bytes

/

# DecryptVaultStep.tsx

Top

## File metadata and controls

- Code

- Blame


29 lines (25 loc) · 961 Bytes

[Raw](https://github.com/vultisig/vultisig-windows/raw/refs/heads/main/core/ui/vault/import/components/DecryptVaultStep.tsx)

1

2

3

4

5

6

7

8

9

10

11

12

13

14

15

16

17

18

19

20

21

22

23

24

25

26

27

28

29

import{DecryptVaultView}from'@core/ui/vault/import/components/DecryptVaultView'

import{decryptDatBackup}from'@core/ui/vault/import/utils/decryptDatBackup'

import{fromDatBackupString}from'@core/ui/vault/import/utils/fromDatBackupString'

import{Vault}from'@core/ui/vault/Vault'

import{OnFinishProp,ValueProp}from'@lib/ui/props'

import{useMutation}from'@tanstack/react-query'

exportconstDecryptVaultStep=({

value,

onFinish,

}: ValueProp<ArrayBuffer>&OnFinishProp<Vault>)=>{

const{ mutate, error, isPending }=useMutation({

mutationFn: async(password: string)=>{

constdecrypted=awaitdecryptDatBackup({

backup: value,

password,

})

constvalueAsString=newTextDecoder().decode(decrypted)

returnfromDatBackupString(valueAsString)

},

onSuccess: onFinish,

})

return(

<DecryptVaultViewisPending={isPending}error={error}onSubmit={mutate}/>

)

}

You can’t perform that action at this time.