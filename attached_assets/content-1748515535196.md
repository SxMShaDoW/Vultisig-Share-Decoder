[Skip to content](https://github.com/vultisig/vultisig-windows/blob/main/core/ui/vault/import/components/DecryptVaultContainerStep.tsx#start-of-content)

You signed in with another tab or window. [Reload](https://github.com/vultisig/vultisig-windows/blob/main/core/ui/vault/import/components/DecryptVaultContainerStep.tsx) to refresh your session.You signed out in another tab or window. [Reload](https://github.com/vultisig/vultisig-windows/blob/main/core/ui/vault/import/components/DecryptVaultContainerStep.tsx) to refresh your session.You switched accounts on another tab or window. [Reload](https://github.com/vultisig/vultisig-windows/blob/main/core/ui/vault/import/components/DecryptVaultContainerStep.tsx) to refresh your session.Dismiss alert

[vultisig](https://github.com/vultisig)/ **[vultisig-windows](https://github.com/vultisig/vultisig-windows)** Public

- [Notifications](https://github.com/login?return_to=%2Fvultisig%2Fvultisig-windows) You must be signed in to change notification settings
- [Fork\\
7](https://github.com/login?return_to=%2Fvultisig%2Fvultisig-windows)
- [Star\\
9](https://github.com/login?return_to=%2Fvultisig%2Fvultisig-windows)


## Files

main

/

# DecryptVaultContainerStep.tsx

Copy path

Blame

Blame

## Latest commit

[![Ehsan-saradar](https://avatars.githubusercontent.com/u/7792430?v=4&size=40)](https://github.com/Ehsan-saradar)[Ehsan-saradar](https://github.com/vultisig/vultisig-windows/commits?author=Ehsan-saradar)

[merge with main](https://github.com/vultisig/vultisig-windows/commit/9c45dd215fd2859d4847a2e15a7c654b767048c1)

Apr 17, 2025

[9c45dd2](https://github.com/vultisig/vultisig-windows/commit/9c45dd215fd2859d4847a2e15a7c654b767048c1) · Apr 17, 2025

## History

[History](https://github.com/vultisig/vultisig-windows/commits/main/core/ui/vault/import/components/DecryptVaultContainerStep.tsx)

37 lines (35 loc) · 1.23 KB

/

# DecryptVaultContainerStep.tsx

Top

## File metadata and controls

- Code

- Blame


37 lines (35 loc) · 1.23 KB

[Raw](https://github.com/vultisig/vultisig-windows/raw/refs/heads/main/core/ui/vault/import/components/DecryptVaultContainerStep.tsx)

1

2

3

4

5

6

7

8

9

10

11

12

13

14

15

16

17

18

19

20

21

22

23

24

25

26

27

28

29

30

31

32

33

34

35

36

37

import{fromBinary}from'@bufbuild/protobuf'

import{fromCommVault}from'@core/mpc/types/utils/commVault'

import{VaultSchema}from'@core/mpc/types/vultisig/vault/v1/vault\_pb'

import{DecryptVaultView}from'@core/ui/vault/import/components/DecryptVaultView'

import{Vault}from'@core/ui/vault/Vault'

import{OnFinishProp,ValueProp}from'@lib/ui/props'

import{decryptWithAesGcm}from'@lib/utils/encryption/aesGcm/decryptWithAesGcm'

import{fromBase64}from'@lib/utils/fromBase64'

import{pipe}from'@lib/utils/pipe'

import{useMutation}from'@tanstack/react-query'

exportconstDecryptVaultContainerStep=({

value,

onFinish,

}: ValueProp<string>&OnFinishProp<Vault>)=>{

const{ mutate, error, isPending }=useMutation({

mutationFn: async(password: string)=>

pipe(

value,

fromBase64,

vault=>

decryptWithAesGcm({

key: password,

value: vault,

}),

v=>newUint8Array(v),

binary=>fromBinary(VaultSchema,binary),

fromCommVault,

vault=>({ ...vault,isBackedUp: true})

),

onSuccess: onFinish,

})

return(

<DecryptVaultViewisPending={isPending}error={error}onSubmit={mutate}/>

)

}

You can’t perform that action at this time.