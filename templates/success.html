<!DOCTYPE html>
<html>
<head>
    <title>Decoded Output</title>
    <style>
        body {
            background-color: #1a1a2e; /* Dark background */
            color: #e94560; /* Neon pink text */
            font-family: 'Arial', sans-serif;
            text-align: center;
            padding: 20px;
        }
        h2 {
            color: #00ffcc; /* Neon green for headers */
        }
        p {
            color: #a9a9e9; /* Light gray */
        }
        pre {
            background-color: #0f3460; /* Dark blue for preformatted text */
            color: #ffffff; /* White text for preformatted */
            padding: 10px;
            border-radius: 5px;
            overflow-wrap: break-word; /* Ensure long words wrap */
            max-width: 700px; /* Set a max width */
            white-space: pre-wrap; /* Preserve whitespace */
            word-wrap: break-word; /* Break long words */
            margin: 10px auto; /* Center align */
        }
        input[type="submit"] {
            background-color: #00ffcc; /* Neon green for buttons */
        }
        .raw-output-section {
            margin-top: 20px;
        }

        .raw-output-section .toggle-header {
            cursor: pointer;
            background-color: #1a1a2e;
            padding: 10px;
            border: 1px solid #00ffcc;
            border-radius: 5px;
            margin: 5px 0;
            transition: background-color 0.3s;
        }

        .raw-output-section .content {
            display: none;
            padding: 10px;
            background-color: #1a1a2e;
            border-radius: 5px;
        }

        .raw-output-section .toggle-header:hover {
            background-color: #00ffcc;
            color: #1a1a2e;
        }
        #balanceDisplay {
            margin-top: 10px;
            padding: 10px;
            background-color: #0f3460;
            border-radius: 5px;
            display: none;
        }
        #balanceDisplay.show {
            display: block;
            animation: fadeIn 0.3s;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .styled-button {
            padding: 10px 20px; /* Add padding for size */
            margin: 10px 0; /* Add margin for spacing */
            border: none; /* Remove default border */
            border-radius: 5px; /* Rounded corners */
            background-color: #00ffcc; /* Dark blue background */
            color: #a9a9e9
            font-size: 16px; /* Font size */
            cursor: pointer; /* Pointer cursor on hover */
            transition: background-color 0.3s; /* Smooth background change */
        }
        .styled-button:hover {
            //background-color: #1a1a2e; /* Change background on hover */
            //color: #ffffff;
        }
    </style>
</head>
    <script>
        async function checkBalance(ecdsaKey, eddsaKey) {
            const display = document.getElementById('balanceDisplay');
            const button = event.target;

            try {
                // Show loading state
                button.disabled = true;
                button.textContent = 'Checking...';
                display.style.display = 'block';
                display.textContent = 'Fetching balance...';

                const response = await fetch(`/api/balance/${ecdsaKey}/${eddsaKey}`);
                const data = await response.json();

                // Show result with animation
                if (!data || data.balance === undefined) {
                    display.textContent = 'Not registered for the airdrop. Sign up for the airdrop here: https://airdrop.vultisig.com/';
                } else {
                    display.textContent = `Airdrop Balance: ${data.balance}`;
                }
                display.classList.add('show');
            } catch (error) {
                display.textContent = 'Error fetching balance';
            } finally {
                // Reset button
                button.disabled = false;
                button.textContent = 'Check Airdrop Balance';
            }
        }
    </script>
<body>
    <div>
    <h2>Decoded Output:</h2>
</div>
    <div>
        <ul>
            <li> The WIF private keys for Bitcoin-like networks can be imported into  tools such as Electrum.</li>
            <li> The private keys for Ethereum networks can be imported into tools such as Metamask.</li>
            <li> The private keys for Cosmos networks can be imported into tools such as Keplr.</li>
            <li>
                The private keys will only have your balance if you uploaded more than a 50% threshold (2of2,2of3,3of5,4of7,etc) of the shares.
            </li>
            <li>Remember: This should be a 1 time recovery situation as Vultisig features cannot protect you after you have imported your private key into another wallet.</li>
        </ul>
    </br>
</div>
    <div>
    <form action="/" method="get">
        <input type="submit" value="Check another share" />
    </form>
    </div>
    <div><div class="share-details">
            <h3>Share Details</h3>
            <pre>{{.ShareDetails}}</pre>
        </div>

        <div class="public-keys">
            <h3>Public Keys</h3>
            <pre>ECDSA: {{.PublicKeyECDSA}}</pre>
            <pre>EdDSA: {{.PublicKeyEDDSA}}</pre>
            <button onclick="checkBalance('{{.PublicKeyECDSA}}', '{{.PublicKeyEDDSA}}')" class="styled-button">Check Airdrop Balance</button>
            <pre id="balanceDisplay"></pre>
        </div>

        <div class="private-keys">
            <h3>WIF Private Keys</h3>
            {{range $chain, $key := .WIFPrivateKeys}}
            <pre>{{$chain}}:{{$key}}</pre>
            {{end}}
        </div>

        <div class="private-keys">
            <h3>Private Keys</h3>
            {{range $chain, $key := .PrivateKeys}}
            <pre>{{$chain}}: {{$key}}</pre>
            {{end}}
        </div>

        <div class="addresses">
            <h3>Addresses</h3>
            {{range $chain, $addr := .Addresses}}
            <pre>{{$chain}}: {{$addr}}</pre>
            {{end}}
        </div>

        {{if .RawOutput}}
        <div class="raw-output-section">
            <h2 class="toggle-header" onclick="toggleSection('rawOutputContent')">
                Raw Output <span class="toggle-arrow"></span>
            </h2>
            <div class="content" id="rawOutputContent">
                <pre>{{.RawOutput}}</pre>
            </div>
        </div>
        {{end}}</div>
    
    <div>
    <form action="/" method="get">
        <input type="submit" value="Check another share" />
    </form>
</div>
        <div>
    {{ template "footer" . }}
        </div>
</body>
</html>