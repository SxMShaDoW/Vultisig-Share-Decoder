<!DOCTYPE html>
<html>
<head>
  <title>Upload Files</title>
    <style>
        body {
            background-color: #1a1a2e; /* Dark background */
            color: #e94560; /* Neon pink text */
            font-family: 'Arial', sans-serif;
            text-align: center;
            padding: 20px;
        }
        a {
            color: yellow;
        }
        h2 {
            color: #00ffcc; /* Neon green */
        }
        p {
            color: #a9a9e9; /* Light gray */
        }
        .form-table {
            width: 100%;
            margin: 0 auto; /* Center align the table */
            border-collapse: collapse; /* Remove space between table cells */
        }
        .form-table th,
        .form-table td {
            border: 1px solid #0f3460; /* Add border to cells */
            padding: 10px;
            text-align: center; /* Center align text in table cells */
        }
        .form-table th {
            background-color: #1a1a2e; /* Dark background for header */
            color: #00ffcc; /* Neon green text */
            font-weight: bold;
        }
        /* Ensuring file and password inputs take full width but have a max width to prevent overflow */
        input[type="file"],
        input[type="password"],
        input[type="submit"] {
            width: 90%; /* Make inputs 90% of the cell width */
            max-width: 300px; /* Set a max width to prevent overflow */
            padding: 8px; /* Slightly reduced padding */
            border: none;
            border-radius: 5px;
            background-color: #0f3460; /* Dark blue */
            color: #ffffff; /* White text */
            font-size: 16px;
            display: block; /* Ensure it occupies full width */
            margin: 0 auto; /* Center inputs in their cells */
        }
        input[type="submit"], button {
            transition: background-color 0.3s;
        }
        .styled-button {
            padding: 10px 20px; /* Add padding for size */
            margin: 10px 0; /* Add margin for spacing */
            border: none; /* Remove default border */
            border-radius: 5px; /* Rounded corners */
            background-color: #0f3460; /* Dark blue background */
            color: #ffffff; /* White text */
            font-size: 16px; /* Font size */
            cursor: pointer; /* Pointer cursor on hover */
            transition: background-color 0.3s; /* Smooth background change */
        }
        .styled-button:hover {
            background-color: #1a1a2e; /* Change background on hover */
        }
        pre {
            background-color: #0f3460; /* Dark blue for preformatted text */
            color: #ffffff; /* White text for preformatted */
            padding: 10px;
            border-radius: 5px;
            overflow-wrap: break-word; /* Ensure long words wrap */
            max-width: 100%; /* Responsive max width */
            white-space: pre-wrap; /* Preserve whitespace */
            word-wrap: break-word; /* Break long words */
        }
        /* Tooltip styles */
        .tooltip {
            position: relative;
            display: inline-block;
            cursor: pointer;
            color: #ffcc00; /* Tooltip color */
        }
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 300px;
            background-color: #ff4444; /* Red background */
            color: #ffffff; /* White text */
            text-align: center;
            border-radius: 5px;
            padding: 5px 10px;
            position: absolute;
            z-index: 1;
            bottom: 125%; /* Position above the text */
            left: 50%;
            margin-left: -150px; /* Center the tooltip */
            opacity: 0;
            transition: opacity 0.3s;
        }
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        .remove-button {
            background-color: #e94560; /* Neon pink for the remove button */
            color: #ffffff; /* White text */
            border: none; /* Remove default border */
            border-radius: 5px; /* Rounded corners */
            padding: 5px 10px; /* Padding for the button */
            cursor: pointer; /* Pointer cursor on hover */
        }

        .remove-button:hover {
            background-color: #ff4d4d; /* Change color on hover */
        }
    </style>
    <script>
        // Function to add a new file and password input
        function addFileInput() {
            const container = document.getElementById("fileContainer");

            // Create a new row for the new inputs
            const newRow = document.createElement("tr");
            newRow.className = "form-group"; // You can keep this for styling if needed

            // Create file input cell
            const fileCell = document.createElement("td");

            // Create file input
            const fileInput = document.createElement("input");
            fileInput.type = "file";
            fileInput.name = "file";
            fileInput.required = true;

            // Append file input to its cell
            fileCell.appendChild(fileInput);

            // Create password input cell
            const passwordCell = document.createElement("td");

            // Create password input
            const passwordInput = document.createElement("input");
            passwordInput.type = "password";
            passwordInput.name = "password";

            // Append password input to its cell
            passwordCell.appendChild(passwordInput);

            // Create remove button cell
            const removeCell = document.createElement("td");
            const removeButton = document.createElement("button");
            removeButton.textContent = "X"; // Text for the button
            removeButton.className = "remove-button"; // Add class for styling

            // Inline remove function
            removeButton.onclick = function () {
                // Check if there's more than one row before removing
                if (container.rows.length > 1) {
                    container.removeChild(newRow); // Remove the row when clicked
                } else {
                    alert("You cannot remove the last row."); // Alert user if only one row exists
                }
            };

            // Append the remove button to its cell
            removeCell.appendChild(removeButton);

            // Append all cells to the new row
            newRow.appendChild(fileCell);
            newRow.appendChild(passwordCell);
            newRow.appendChild(removeCell);

            // Add the new row to the container (tbody)
            container.appendChild(newRow);
        }

    function removeRow(button) {
        const row = button.closest('tr'); // Get the closest row
        const container = document.getElementById("fileContainer");
        // Check if there's more than one row before removing
        if (container.rows.length > 1) {
            container.removeChild(row); // Remove the row when clicked
        } else {
            alert("You cannot remove the last row."); // Alert user if only one row exists
        }
    }
    </script>
</head>
<body>
    <div>
  <h2>Decode Vultisig Shares</h2>
    <p>Why is this tool useful? </p>
        <p>It can provide you information about your backup without having to import it into the app. It will also extract your private key information in case you need to migrate to a traditional seed based app. Note: It will only extract the correct private key information if you provide more than half of the threshold files (2of2,2of3,4of6, etc)</p></div>
    <div>
    <form enctype="multipart/form-data" action="/upload" method="post">
        <table class="form-table">
            <thead>
                <tr>
                    <th>Select a File</th>
                    <th>Password (Optional)</th>
                    <th>Action</th> <!-- New header for the remove action -->
                </tr>
            </thead>
            <tbody id="fileContainer">
                <tr class="form-group">
                    <td>
                        <input type="file" name="file" required />
                    </td>
                    <td>
                        <input type="password" name="password" />
                    </td>
                    <td>
                        <button type="button" class="remove-button" onclick="removeRow(this)">X</button>
                    </td>
                </tr>
            </tbody>
        </table>
        <button type="button" class="styled-button" onclick="addFileInput()">+ Add Another Share</button>
        <div class="form-group">
            <input type="submit" class="styled-button" value="Upload" />
        </div>
    </form>
    </div>
    <div>
    <h5> The file you uploaded is deleted right away and we never store the password anywhere. </h5>
    <p style="color: white"> If you are looking for some examples on how to use it. You can find shares in the Github Repo to download. Just download them and upload it here.</p>
    <ul>
    <li> <a href="https://github.com/SxMShaDoW/Vultisig-Share-Decoder/blob/main/Test-part1of2.vult">Test Vault 1/2 Share Android</a> </li>
    <li><a href="https://github.com/SxMShaDoW/Vultisig-Share-Decoder/blob/main/Test-part2of2.vult">Test Vault 2/2 Share iPhone</a> </li>
   <li> <a href="https://github.com/SxMShaDoW/Vultisig-Share-Decoder/blob/main/honeypot.bak">JP's Honeypot</a>
    </li>
    </ul>
    <p> You can check the code (and run it locally) from <a href="https://github.com/SxMShaDoW/Vultisig-Share-Decoder/tree/main">Github</a> and see the code deployed from <a href="http://replit.com/@kersch/VultisigShareDecoder">Replit</a> </p>
    </div>
    <div>
{{ template "footer" . }}
    </div>
</body>
</html>